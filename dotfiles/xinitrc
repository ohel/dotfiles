#!/bin/bash

# E.g. for Japanese input
#export XMODIFIERS=@im=scim
#export GTK_IM_MODULE=scim

export MAGICK_THREAD_LIMIT=4
export GDK_USE_XFT=1
export QT_XFT=true
export IGNOREEOF=1

[[ -f ~/.Xresources ]] && xrdb -merge -I$HOME ~/.Xresources

mkdir -p /dev/shm/thumbnails
mkdir -p /dev/shm/cache
mkdir -p /tmp/mhwaveedit
mkfifo /dev/shm/mpvfifo 2>/dev/null

# Set standby, suspend, off for DPMS.
xset dpms 900 0 0
# Disable DPMS, disable screensaver. Using a television, it doesn't support DPMS anyway.
xset -dpms; xset s off

# To use this as Xsession, simply: ln -s ~/.xinitrc ~/.xsession && chmod +x ~/.xinitrc
if test $(basename "$0") == .xsession
then
    exec xfce4-session
else
    exec xfce4-session &

    # This application does absolutely nothing, it just waits to be killed, keeping X alive.
    # It is as stable as it gets, even if the real session manager might be unstable.
    exec /opt/programs/lastofxinitrc/lastofxinitrc
fi
